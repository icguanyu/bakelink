import{_ as te}from"./OrderCard-G0CYHcRA.js";import{_ as ae,u as ne,r as v,m as y,l as b,M as se,T as oe,I as ie,S as ce,n as g,c as u,o as d,b as a,A as re,v as E,d as s,w as m,h as T,t as r,f as le,U as ue,J as de,V as me,e as pe,F as O,y as M,g as ve,q as ye,R as _e,k as he}from"./index-DLQBT_Le.js";/* empty css                          *//* empty css               */import{o as fe}from"./SelectProduct-CVYdWS4e.js";/* empty css               *//* empty css                     */import"./products-yinm2DdL.js";const ke={class:"order-manager"},ge={class:"order-header"},De={class:"header-top"},qe={class:"header-actions"},Ae={class:"stats-cards"},be={class:"stat-card"},Ye={class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},Ne={class:"stat-content"},Ce={class:"stat-value"},Te={class:"stat-label"},Oe={class:"stat-card"},Me={class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},Re={class:"stat-content"},we={class:"stat-value"},xe={class:"stat-card"},Se={class:"stat-icon",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"}},Le={class:"stat-content"},Ee={class:"stat-value"},Ve={class:"stat-card"},$e={class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},Ie={class:"stat-content"},Be={class:"stat-value"},ze={class:"stat-card highlight"},He={class:"stat-icon",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"}},We={class:"stat-content"},Pe={class:"stat-value"},Ue={class:"stat-label"},Fe={class:"toolbar"},je={class:"date-selector"},Je={style:{display:"flex",gap:"8px","align-items":"center"}},Qe={class:"status-tabs"},Ge=["onClick"],Ke={class:"tab-label"},Xe={key:1,class:"tab-count-all"},Ze={class:"orders-grid"},et=["id"],tt={key:0,class:"empty-state"},at=["onClick"],nt={__name:"index",setup(st){ne();const _=v(null),Y=v("all"),h=v(""),c=v(y().format("YYYY-MM-DD")),D=v("detailed"),q=v(!0),N=v([{id:"ORD-20260216-001",customerName:"陳小美",phone:"0912-345-678",pickupTime:"2026-02-16 14:00",status:"ordered",payment:"cash",items:[{name:"經典牛奶吐司",quantity:2,price:120},{name:"海鹽奶油可頌",quantity:3,price:75}],totalAmount:465,note:"請幫我切片",createdAt:"2026-02-16 09:30"},{id:"ORD-20260216-002",customerName:"王大明",phone:"0923-456-789",pickupTime:"2026-02-16 15:30",status:"ordered",payment:"linepay",items:[{name:"巧克力可頌",quantity:5,price:85},{name:"伯爵茶貝果",quantity:2,price:90}],totalAmount:605,note:"",createdAt:"2026-02-16 10:15"},{id:"ORD-20260216-003",customerName:"林小華",phone:"0934-567-890",pickupTime:"2026-02-16 16:00",status:"ordered",payment:"card",items:[{name:"小麥酸種",quantity:1,price:180},{name:"蜂蜜核桃雜糧",quantity:1,price:150}],totalAmount:330,note:"請協助包裝精美一點，要送人的",createdAt:"2026-02-16 08:45"},{id:"ORD-20260216-004",customerName:"魏志軒",phone:"0912-789-456",pickupTime:"2026-02-16 10:30",status:"ordered",payment:"linepay",items:[{name:"經典牛奶吐司",quantity:2,price:120},{name:"伯爵茶貝果",quantity:3,price:90},{name:"巧克力可頌",quantity:2,price:85},{name:"海鹽奶油可頌",quantity:4,price:75},{name:"蜂蜜核桃雜糧",quantity:1,price:150},{name:"手作波蘿麵包",quantity:3,price:65},{name:"小麥酸種",quantity:1,price:180}],totalAmount:1290,note:"公司聚餐用，需要快速準備",createdAt:"2026-02-16 09:00"},{id:"ORD-20260216-005",customerName:"廖佳穎",phone:"0923-654-321",pickupTime:"2026-02-16 11:00",status:"ordered",payment:"cash",items:[{name:"海鹽奶油可頌",quantity:4,price:75}],totalAmount:300,note:"",createdAt:"2026-02-16 09:15"},{id:"ORD-20260216-006",customerName:"陳思翰",phone:"0934-123-789",pickupTime:"2026-02-16 12:00",status:"completed",payment:"card",items:[{name:"巧克力可頌",quantity:2,price:85},{name:"手作波蘿麵包",quantity:2,price:65}],totalAmount:330,note:"",createdAt:"2026-02-16 09:30"},{id:"ORD-20260216-007",customerName:"何美言",phone:"0945-234-567",pickupTime:"2026-02-16 13:30",status:"ordered",payment:"linepay",items:[{name:"法式厚切吐司",quantity:1,price:140},{name:"起司鹹可頌",quantity:2,price:90}],totalAmount:320,note:"要快速取貨",createdAt:"2026-02-16 10:00"},{id:"ORD-20260216-008",customerName:"黃奕謙",phone:"0956-789-012",pickupTime:"2026-02-16 14:30",status:"ordered",payment:"cash",items:[{name:"經典牛奶吐司",quantity:3,price:120}],totalAmount:360,note:"請放在一起",createdAt:"2026-02-16 10:45"},{id:"ORD-20260216-009",customerName:"鄒芊芊",phone:"0967-345-678",pickupTime:"2026-02-16 15:00",status:"ordered",payment:"card",items:[{name:"蒜香法棍",quantity:2,price:110},{name:"蜂蜜核桃雜糧",quantity:1,price:150},{name:"經典牛奶吐司",quantity:2,price:120},{name:"海鹽奶油可頌",quantity:3,price:75},{name:"巧克力可頌",quantity:2,price:85}],totalAmount:895,note:"公司團購",createdAt:"2026-02-16 11:20"},{id:"ORD-20260216-010",customerName:"簡郁庭",phone:"0978-456-789",pickupTime:"2026-02-16 15:45",status:"ordered",payment:"bank",items:[{name:"伯爵茶貝果",quantity:5,price:90}],totalAmount:450,note:"辦公室訂購",createdAt:"2026-02-16 11:50"},{id:"ORD-20260216-011",customerName:"陳俊宇",phone:"0989-567-890",pickupTime:"2026-02-16 16:30",status:"cancelled",payment:"cash",items:[{name:"海鹽奶油可頌",quantity:2,price:75},{name:"巧克力可頌",quantity:2,price:85}],totalAmount:320,note:"客戶主動取消",createdAt:"2026-02-16 12:30"},{id:"ORD-20260216-012",customerName:"葉靖雯",phone:"0912-345-012",pickupTime:"2026-02-16 17:00",status:"ordered",payment:"linepay",items:[{name:"小麥酸種",quantity:2,price:180},{name:"桂圓紅棗吐司",quantity:1,price:150}],totalAmount:510,note:"送禮用，麻煩精心包裝",createdAt:"2026-02-16 13:00"},{id:"ORD-20260216-013",customerName:"吳昀庭",phone:"0923-678-901",pickupTime:"2026-02-16 17:30",status:"ordered",payment:"card",items:[{name:"手作波蘿麵包",quantity:6,price:65},{name:"經典牛奶吐司",quantity:4,price:120},{name:"巧克力可頌",quantity:5,price:85},{name:"伯爵茶貝果",quantity:8,price:90},{name:"蒜香法棍",quantity:3,price:110},{name:"桂圓紅棗吐司",quantity:2,price:150}],totalAmount:2770,note:"派對用 請現場計數 需要分開包裝",createdAt:"2026-02-16 13:45"},{id:"ORD-20260215-015",customerName:"張雅芳",phone:"0945-678-901",pickupTime:"2026-02-15 18:00",status:"completed",payment:"cash",items:[{name:"法式厚切吐司",quantity:2,price:140},{name:"手作波蘿麵包",quantity:4,price:65}],totalAmount:540,note:"",createdAt:"2026-02-15 14:20"},{id:"ORD-20260215-014",customerName:"劉建國",phone:"0956-789-012",pickupTime:"2026-02-15 17:30",status:"cancelled",payment:"bank",items:[{name:"蒜香法棍",quantity:3,price:110}],totalAmount:330,note:"客戶臨時取消",createdAt:"2026-02-15 12:00"},{id:"ORD-20260217-001",customerName:"黃志明",phone:"0967-123-456",pickupTime:"2026-02-17 10:00",status:"ordered",payment:"linepay",items:[{name:"起司鹹可頌",quantity:4,price:90},{name:"手作波蘿麵包",quantity:3,price:65}],totalAmount:555,note:"早上要用，麻煩提前準備",createdAt:"2026-02-16 16:20"},{id:"ORD-20260217-002",customerName:"李淑芬",phone:"0978-234-567",pickupTime:"2026-02-17 14:30",status:"ordered",payment:"cash",items:[{name:"桂圓紅棗吐司",quantity:2,price:150}],totalAmount:300,note:"",createdAt:"2026-02-16 18:00"},{id:"ORD-20260218-001",customerName:"周美玲",phone:"0989-345-678",pickupTime:"2026-02-18 11:00",status:"ordered",payment:"card",items:[{name:"經典牛奶吐司",quantity:3,price:120},{name:"蒜香法棍",quantity:2,price:110}],totalAmount:580,note:"公司訂購",createdAt:"2026-02-16 19:30"}]);N.value.sort((t,e)=>{const n=i=>{const p=i.id.match(/(\d{3})$/);return p?Number(p[1]):0},l=n(t)-n(e);return l!==0?l:t.id.localeCompare(e.id)});const R=fe,V=b(()=>{const t={};return N.value.filter(n=>n.pickupTime.startsWith(c.value)).forEach(n=>{t[n.status]=(t[n.status]||0)+1}),t});R.forEach(t=>{t.value!=="all"&&Object.defineProperty(t,"count",{get:()=>V.value[t.value]||0})});const f=b(()=>{const t=N.value.filter(e=>e.pickupTime.startsWith(c.value));return{total:t.length,ordered:t.filter(e=>e.status==="ordered").length,completed:t.filter(e=>e.status==="completed").length,cancelled:t.filter(e=>e.status==="cancelled").length,revenue:t.filter(e=>e.status!=="cancelled").reduce((e,n)=>e+n.totalAmount,0)}}),w=b(()=>{const t=y().format("YYYY-MM-DD"),e=y().add(1,"day").format("YYYY-MM-DD"),n=y().subtract(1,"day").format("YYYY-MM-DD");return c.value===t?"今日":c.value===e?"明日":c.value===n?"昨日":y(c.value).format("M/D")}),A=b(()=>{let t=N.value;if(t=t.filter(e=>e.pickupTime.startsWith(c.value)),Y.value!=="all"&&(t=t.filter(e=>e.status===Y.value)),h.value){const e=h.value.toLowerCase();t=t.filter(n=>n.id.toLowerCase().includes(e)||n.customerName.toLowerCase().includes(e)||n.phone.includes(e))}return t.sort((e,n)=>{const l=p=>{const k=p.id.match(/(\d{3})$/);return k?Number(k[1]):0},i=l(e)-l(n);return i!==0?i:e.id.localeCompare(n.id)})}),$=t=>({ordered:"已下單",completed:"已完成",cancelled:"已取消"})[t]||t,I=(t,e)=>{t.status=e,he.success(`訂單 ${t.id} 已更新為${$(e)}`)},B=()=>{c.value=y().format("YYYY-MM-DD")},z=()=>{c.value=y(c.value).subtract(1,"day").format("YYYY-MM-DD")},H=()=>{c.value=y(c.value).add(1,"day").format("YYYY-MM-DD")},W=()=>{h.value=""},P=v({y:0,max:0}),x=v(null),S=()=>{const t=_.value;if(!t)return;const e=t.scrollTop||0,n=t.scrollHeight,l=Math.max(0,n-t.clientHeight);P.value={y:e,max:l};const i=x.value;if(!i)return;const p=i.scrollHeight-i.clientHeight;if(p<=0){i.scrollTop=0;return}const k=l>0?e/l:0;i.scrollTop=Math.round(p*k)},C=()=>{window.requestAnimationFrame(S)},L=t=>`order-${t.id}`,U=t=>{const e=t.id.match(/(\d{3})$/);return e?e[1]:"000"},F=b(()=>A.value),j=t=>{const e=L(t),n=document.getElementById(e);n&&n.scrollIntoView({behavior:"smooth",block:"start"})};return se(()=>{_.value=document.querySelector(".container"),_.value&&_.value.addEventListener("scroll",C,{passive:!0}),window.addEventListener("resize",C,{passive:!0})}),oe(()=>{_.value&&_.value.removeEventListener("scroll",C),window.removeEventListener("resize",C)}),ie(A,()=>{ce(()=>{S()})},{immediate:!0}),(t,e)=>{const n=le,l=g("Calendar"),i=de,p=g("Clock"),k=g("CircleCheck"),J=g("Warning"),Q=g("Money"),G=me,K=pe,X=te,Z=g("Document");return d(),u("div",ke,[a("div",ge,[a("div",De,[e[6]||(e[6]=a("div",null,[a("h2",null,"訂單管理"),a("p",{class:"subtitle"},"查看與管理每日訂單，追蹤訂單狀態")],-1)),a("div",qe,[s(n,{icon:q.value?"View":"Hide",onClick:e[0]||(e[0]=o=>q.value=!q.value)},{default:m(()=>[T(r(q.value?"顯示統計":"隱藏統計"),1)]),_:1},8,["icon"]),s(n,{icon:D.value==="detailed"?"Document":"List",onClick:e[1]||(e[1]=o=>D.value=D.value==="detailed"?"simple":"detailed")},{default:m(()=>[T(r(D.value==="detailed"?"詳細模式":"簡易模式"),1)]),_:1},8,["icon"]),s(n,{icon:"Back",onClick:B},{default:m(()=>[...e[4]||(e[4]=[T(" 回到今天 ",-1)])]),_:1}),s(n,{type:"primary",icon:"Plus"},{default:m(()=>[...e[5]||(e[5]=[T("新增訂單",-1)])]),_:1})])])]),re(a("div",Ae,[a("div",be,[a("div",Ye,[s(i,null,{default:m(()=>[s(l)]),_:1})]),a("div",Ne,[a("div",Ce,r(f.value.total),1),a("div",Te,r(w.value)+"訂單",1)])]),a("div",Oe,[a("div",Me,[s(i,null,{default:m(()=>[s(p)]),_:1})]),a("div",Re,[a("div",we,r(f.value.ordered),1),e[7]||(e[7]=a("div",{class:"stat-label"},"已下單",-1))])]),a("div",xe,[a("div",Se,[s(i,null,{default:m(()=>[s(k)]),_:1})]),a("div",Le,[a("div",Ee,r(f.value.completed),1),e[8]||(e[8]=a("div",{class:"stat-label"},"已完成",-1))])]),a("div",Ve,[a("div",$e,[s(i,null,{default:m(()=>[s(J)]),_:1})]),a("div",Ie,[a("div",Be,r(f.value.cancelled),1),e[9]||(e[9]=a("div",{class:"stat-label"},"已取消",-1))])]),a("div",ze,[a("div",He,[s(i,null,{default:m(()=>[s(Q)]),_:1})]),a("div",We,[a("div",Pe," $"+r(f.value.revenue.toLocaleString()),1),a("div",Ue,r(w.value)+"營收",1)])])],512),[[ue,q.value]]),a("div",Fe,[a("div",je,[s(n,{icon:"ArrowLeft",circle:"",size:"small",onClick:z}),s(G,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=o=>c.value=o),type:"date",placeholder:"選擇日期",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",style:{width:"160px"}},null,8,["modelValue"]),s(n,{icon:"ArrowRight",circle:"",size:"small",onClick:H})]),a("div",Je,[s(K,{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=o=>h.value=o),placeholder:"搜尋編號、姓名、電話...","prefix-icon":"Search",style:{"max-width":"280px"}},null,8,["modelValue"]),s(n,{icon:"Refresh",onClick:W,disabled:!h.value},null,8,["disabled"])])]),a("div",Qe,[(d(!0),u(O,null,M(ve(R),o=>(d(),u("div",{key:o.value,class:ye(["status-tab",{active:Y.value===o.value}]),onClick:ee=>Y.value=o.value},[a("span",Ke,r(o.label),1),o.value!=="all"?(d(),u("span",{key:0,class:"tab-count",style:_e({background:o.color})},r(o.count),5)):(d(),u("span",Xe,r(f.value.total),1))],10,Ge))),128))]),a("div",Ze,[(d(!0),u(O,null,M(A.value,o=>(d(),u("div",{key:o.id,class:"order-card-anchor",id:L(o)},[s(X,{order:o,"view-mode":D.value,onStatusChange:I},null,8,["order","view-mode"])],8,et))),128)),A.value.length===0?(d(),u("div",tt,[s(i,{class:"empty-icon"},{default:m(()=>[s(Z)]),_:1}),e[10]||(e[10]=a("p",{class:"empty-text"},"目前沒有訂單",-1))])):E("",!0)]),A.value.length?(d(),u("div",{key:0,ref_key:"anchorNavRef",ref:x,class:"order-anchor-nav"},[(d(!0),u(O,null,M(F.value,o=>(d(),u("button",{key:o.id,type:"button",class:"anchor-item",onClick:ee=>j(o)},r(U(o)),9,at))),128))],512)):E("",!0)])}}},pt=ae(nt,[["__scopeId","data-v-d4c5e62f"]]);export{pt as default};

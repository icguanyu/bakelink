import{_ as B,l as N,n as k,c as v,o as c,b as t,v as h,t as i,S as I,d as s,w as d,J as U,h as _,g as z,m as p,F as E,z as P,T as X,x as w,f as W,U as Z,u as ee,r as $,V as te,e as ae,q as se,k as oe}from"./index-BxJShhSS.js";/* empty css            */const ne={class:"order-header"},ie={class:"order-id"},le={class:"id-prefix"},ce={class:"id-highlight"},de={class:"order-customer"},re={class:"customer-info"},ue={class:"customer-name"},me={key:0,class:"customer-phone"},pe={key:1,class:"customer-pickup"},ve={class:"pickup-time"},ye={key:0,class:"pickup-date"},_e={key:0,class:"order-items"},fe={class:"item-name"},he={class:"item-quantity"},ke={key:1,class:"order-note"},ge={class:"order-footer"},De={class:"order-amount"},be={class:"amount-value"},qe={key:0,class:"order-payment"},Ae={__name:"OrderCard",props:{order:{type:Object,required:!0},viewMode:{type:String,required:!0}},emits:["open","status-change"],setup(o,{emit:b}){const f=o,u=[{label:"全部",value:"all",color:""},{label:"已下單",value:"ordered",color:"#3b82f6",count:0},{label:"已完成",value:"completed",color:"#10b981",count:0},{label:"已取消",value:"cancelled",color:"#ef4444",count:0}],g=b,T=r=>({ordered:"已下單",completed:"已完成",cancelled:"已取消"})[r]||r,x=r=>u.find(q=>q.value===r)?.color||"#6b7280",S=r=>({cash:"現金",bank:"匯款",linepay:"Line Pay",card:"信用卡"})[r]||r,D=r=>p(r).isSame(p(),"day"),C=N(()=>{const r=f.order?.id||"",n=r.slice(-3);return{prefix:r.slice(0,-3),lastThree:n}}),R=()=>{g("open",f.order.id)},M=r=>{g("status-change",f.order,r)};return(r,n)=>{const q=k("User"),A=U,O=k("Phone"),L=k("AlarmClock"),a=k("Document"),e=X,l=W;return c(),v("div",{class:"order-card",onClick:R},[t("div",ne,[t("div",ie,[t("span",le,i(C.value.prefix),1),t("span",ce,i(C.value.lastThree),1)]),t("div",{class:"order-status-badge",style:I({background:x(o.order.status)})},i(T(o.order.status)),5)]),t("div",de,[t("div",re,[s(A,{class:"customer-icon"},{default:d(()=>[s(q)]),_:1}),t("span",ue,i(o.order.customerName),1)]),o.viewMode==="detailed"?(c(),v("div",me,[s(A,null,{default:d(()=>[s(O)]),_:1}),_(" "+i(o.order.phone),1)])):h("",!0),o.viewMode==="detailed"?(c(),v("div",pe,[s(A,null,{default:d(()=>[s(L)]),_:1}),t("span",ve,[D(o.order.pickupTime)?h("",!0):(c(),v("span",ye,i(z(p)(o.order.pickupTime).format("MM/DD")),1)),_(" "+i(z(p)(o.order.pickupTime).format("HH:mm")),1)])])):h("",!0)]),o.viewMode==="detailed"?(c(),v("div",_e,[(c(!0),v(E,null,P(o.order.items,(y,V)=>(c(),v("div",{key:V,class:"order-item"},[t("span",fe,i(y.name),1),t("span",he,"× "+i(y.quantity),1)]))),128))])):h("",!0),o.viewMode==="detailed"&&o.order.note?(c(),v("div",ke,[s(A,null,{default:d(()=>[s(a)]),_:1}),t("span",null,i(o.order.note),1)])):h("",!0),t("div",ge,[t("div",De,[n[4]||(n[4]=t("span",{class:"amount-label"},"總金額",-1)),t("span",be,"$"+i(o.order.totalAmount),1)]),o.viewMode==="detailed"?(c(),v("div",qe,[s(e,{size:"small"},{default:d(()=>[_(i(S(o.order.payment)),1)]),_:1})])):h("",!0)]),t("div",{class:"order-actions",onClick:n[3]||(n[3]=Z(()=>{},["stop"]))},[o.order.status==="ordered"?(c(),w(l,{key:0,type:"danger",plain:"",size:"small",onClick:n[0]||(n[0]=y=>M("cancelled"))},{default:d(()=>[...n[5]||(n[5]=[_(" 取消 ",-1)])]),_:1})):h("",!0),o.order.status==="ordered"?(c(),w(l,{key:1,class:"complete",type:"success",size:"small",onClick:n[1]||(n[1]=y=>M("completed"))},{default:d(()=>[...n[6]||(n[6]=[_(" 完成訂單 ",-1)])]),_:1})):h("",!0),o.order.status==="completed"||o.order.status==="cancelled"?(c(),w(l,{key:2,type:"primary",plain:"",size:"small",onClick:n[2]||(n[2]=y=>M("ordered"))},{default:d(()=>[...n[7]||(n[7]=[_(" 復原為已下單 ",-1)])]),_:1})):h("",!0)])])}}},Ye=B(Ae,[["__scopeId","data-v-35df19ee"]]),Te={class:"order-manager"},Ce={class:"stats-cards"},Me={class:"stat-card"},Oe={class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},$e={class:"stat-content"},Ne={class:"stat-value"},xe={class:"stat-label"},Re={class:"stat-card"},we={class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},Se={class:"stat-content"},Le={class:"stat-value"},Ve={class:"stat-card"},Ee={class:"stat-icon",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"}},Pe={class:"stat-content"},ze={class:"stat-value"},Be={class:"stat-card"},Ie={class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},Ue={class:"stat-content"},We={class:"stat-value"},je={class:"stat-card highlight"},Fe={class:"stat-icon",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"}},He={class:"stat-content"},Je={class:"stat-value"},Qe={class:"stat-label"},Ge={class:"toolbar"},Ke={class:"date-selector"},Xe={class:"date-shortcuts"},Ze={style:{display:"flex",gap:"8px","align-items":"center"}},et={class:"toolbar-actions"},tt={class:"status-tabs"},at=["onClick"],st={class:"tab-label"},ot={key:1,class:"tab-count-all"},nt={class:"orders-grid"},it={key:0,class:"empty-state"},lt={__name:"index",setup(o){ee();const b=$("all"),f=$(""),u=$(p().format("YYYY-MM-DD")),g=$("detailed"),T=$([{id:"ORD-20260216-001",customerName:"陳小美",phone:"0912-345-678",pickupTime:"2026-02-16 14:00",status:"ordered",payment:"cash",items:[{name:"經典牛奶吐司",quantity:2,price:120},{name:"海鹽奶油可頌",quantity:3,price:75}],totalAmount:465,note:"請幫我切片",createdAt:"2026-02-16 09:30"},{id:"ORD-20260216-002",customerName:"王大明",phone:"0923-456-789",pickupTime:"2026-02-16 15:30",status:"ordered",payment:"linepay",items:[{name:"巧克力可頌",quantity:5,price:85},{name:"伯爵茶貝果",quantity:2,price:90}],totalAmount:605,note:"",createdAt:"2026-02-16 10:15"},{id:"ORD-20260216-003",customerName:"林小華",phone:"0934-567-890",pickupTime:"2026-02-16 16:00",status:"ordered",payment:"card",items:[{name:"小麥酸種",quantity:1,price:180},{name:"蜂蜜核桃雜糧",quantity:1,price:150}],totalAmount:330,note:"請協助包裝精美一點，要送人的",createdAt:"2026-02-16 08:45"},{id:"ORD-20260216-004",customerName:"魏志軒",phone:"0912-789-456",pickupTime:"2026-02-16 10:30",status:"ordered",payment:"linepay",items:[{name:"經典牛奶吐司",quantity:2,price:120},{name:"伯爵茶貝果",quantity:3,price:90},{name:"巧克力可頌",quantity:2,price:85},{name:"海鹽奶油可頌",quantity:4,price:75},{name:"蜂蜜核桃雜糧",quantity:1,price:150},{name:"手作波蘿麵包",quantity:3,price:65},{name:"小麥酸種",quantity:1,price:180}],totalAmount:1290,note:"公司聚餐用，需要快速準備",createdAt:"2026-02-16 09:00"},{id:"ORD-20260216-005",customerName:"廖佳穎",phone:"0923-654-321",pickupTime:"2026-02-16 11:00",status:"ordered",payment:"cash",items:[{name:"海鹽奶油可頌",quantity:4,price:75}],totalAmount:300,note:"",createdAt:"2026-02-16 09:15"},{id:"ORD-20260216-006",customerName:"陳思翰",phone:"0934-123-789",pickupTime:"2026-02-16 12:00",status:"completed",payment:"card",items:[{name:"巧克力可頌",quantity:2,price:85},{name:"手作波蘿麵包",quantity:2,price:65}],totalAmount:330,note:"",createdAt:"2026-02-16 09:30"},{id:"ORD-20260216-007",customerName:"何美言",phone:"0945-234-567",pickupTime:"2026-02-16 13:30",status:"ordered",payment:"linepay",items:[{name:"法式厚切吐司",quantity:1,price:140},{name:"起司鹹可頌",quantity:2,price:90}],totalAmount:320,note:"要快速取貨",createdAt:"2026-02-16 10:00"},{id:"ORD-20260216-008",customerName:"黃奕謙",phone:"0956-789-012",pickupTime:"2026-02-16 14:30",status:"ordered",payment:"cash",items:[{name:"經典牛奶吐司",quantity:3,price:120}],totalAmount:360,note:"請放在一起",createdAt:"2026-02-16 10:45"},{id:"ORD-20260216-009",customerName:"鄒芊芊",phone:"0967-345-678",pickupTime:"2026-02-16 15:00",status:"ordered",payment:"card",items:[{name:"蒜香法棍",quantity:2,price:110},{name:"蜂蜜核桃雜糧",quantity:1,price:150},{name:"經典牛奶吐司",quantity:2,price:120},{name:"海鹽奶油可頌",quantity:3,price:75},{name:"巧克力可頌",quantity:2,price:85}],totalAmount:895,note:"公司團購",createdAt:"2026-02-16 11:20"},{id:"ORD-20260216-010",customerName:"簡郁庭",phone:"0978-456-789",pickupTime:"2026-02-16 15:45",status:"ordered",payment:"bank",items:[{name:"伯爵茶貝果",quantity:5,price:90}],totalAmount:450,note:"辦公室訂購",createdAt:"2026-02-16 11:50"},{id:"ORD-20260216-011",customerName:"陳俊宇",phone:"0989-567-890",pickupTime:"2026-02-16 16:30",status:"cancelled",payment:"cash",items:[{name:"海鹽奶油可頌",quantity:2,price:75},{name:"巧克力可頌",quantity:2,price:85}],totalAmount:320,note:"客戶主動取消",createdAt:"2026-02-16 12:30"},{id:"ORD-20260216-012",customerName:"葉靖雯",phone:"0912-345-012",pickupTime:"2026-02-16 17:00",status:"ordered",payment:"linepay",items:[{name:"小麥酸種",quantity:2,price:180},{name:"桂圓紅棗吐司",quantity:1,price:150}],totalAmount:510,note:"送禮用，麻煩精心包裝",createdAt:"2026-02-16 13:00"},{id:"ORD-20260216-013",customerName:"吳昀庭",phone:"0923-678-901",pickupTime:"2026-02-16 17:30",status:"ordered",payment:"card",items:[{name:"手作波蘿麵包",quantity:6,price:65},{name:"經典牛奶吐司",quantity:4,price:120},{name:"巧克力可頌",quantity:5,price:85},{name:"伯爵茶貝果",quantity:8,price:90},{name:"蒜香法棍",quantity:3,price:110},{name:"桂圓紅棗吐司",quantity:2,price:150}],totalAmount:2770,note:"派對用 請現場計數 需要分開包裝",createdAt:"2026-02-16 13:45"},{id:"ORD-20260215-015",customerName:"張雅芳",phone:"0945-678-901",pickupTime:"2026-02-15 18:00",status:"completed",payment:"cash",items:[{name:"法式厚切吐司",quantity:2,price:140},{name:"手作波蘿麵包",quantity:4,price:65}],totalAmount:540,note:"",createdAt:"2026-02-15 14:20"},{id:"ORD-20260215-014",customerName:"劉建國",phone:"0956-789-012",pickupTime:"2026-02-15 17:30",status:"cancelled",payment:"bank",items:[{name:"蒜香法棍",quantity:3,price:110}],totalAmount:330,note:"客戶臨時取消",createdAt:"2026-02-15 12:00"},{id:"ORD-20260217-001",customerName:"黃志明",phone:"0967-123-456",pickupTime:"2026-02-17 10:00",status:"ordered",payment:"linepay",items:[{name:"起司鹹可頌",quantity:4,price:90},{name:"手作波蘿麵包",quantity:3,price:65}],totalAmount:555,note:"早上要用，麻煩提前準備",createdAt:"2026-02-16 16:20"},{id:"ORD-20260217-002",customerName:"李淑芬",phone:"0978-234-567",pickupTime:"2026-02-17 14:30",status:"ordered",payment:"cash",items:[{name:"桂圓紅棗吐司",quantity:2,price:150}],totalAmount:300,note:"",createdAt:"2026-02-16 18:00"},{id:"ORD-20260218-001",customerName:"周美玲",phone:"0989-345-678",pickupTime:"2026-02-18 11:00",status:"ordered",payment:"card",items:[{name:"經典牛奶吐司",quantity:3,price:120},{name:"蒜香法棍",quantity:2,price:110}],totalAmount:580,note:"公司訂購",createdAt:"2026-02-16 19:30"}]),x=[{label:"全部",value:"all",color:""},{label:"已下單",value:"ordered",color:"#3b82f6",count:0},{label:"已完成",value:"completed",color:"#10b981",count:0},{label:"已取消",value:"cancelled",color:"#ef4444",count:0}],S=N(()=>{const a={};return T.value.filter(l=>l.pickupTime.startsWith(u.value)).forEach(l=>{a[l.status]=(a[l.status]||0)+1}),a});x.forEach(a=>{a.value!=="all"&&Object.defineProperty(a,"count",{get:()=>S.value[a.value]||0})});const D=N(()=>{const a=T.value.filter(e=>e.pickupTime.startsWith(u.value));return{total:a.length,ordered:a.filter(e=>e.status==="ordered").length,completed:a.filter(e=>e.status==="completed").length,cancelled:a.filter(e=>e.status==="cancelled").length,revenue:a.filter(e=>e.status!=="cancelled").reduce((e,l)=>e+l.totalAmount,0)}}),C=N(()=>{const a=p().format("YYYY-MM-DD"),e=p().add(1,"day").format("YYYY-MM-DD"),l=p().subtract(1,"day").format("YYYY-MM-DD");return u.value===a?"今日":u.value===e?"明日":u.value===l?"昨日":p(u.value).format("M/D")}),R=N(()=>{let a=T.value;if(a=a.filter(e=>e.pickupTime.startsWith(u.value)),b.value!=="all"&&(a=a.filter(e=>e.status===b.value)),f.value){const e=f.value.toLowerCase();a=a.filter(l=>l.id.toLowerCase().includes(e)||l.customerName.toLowerCase().includes(e)||l.phone.includes(e))}return a.sort((e,l)=>p(e.pickupTime).diff(p(l.pickupTime)))}),M=a=>({ordered:"已下單",completed:"已完成",cancelled:"已取消"})[a]||a,r=(a,e)=>{a.status=e,oe.success(`訂單 ${a.id} 已更新為${M(e)}`)},n=()=>{u.value=p().format("YYYY-MM-DD")},q=()=>{u.value=p().add(1,"day").format("YYYY-MM-DD")},A=()=>{u.value=p().add(2,"day").format("YYYY-MM-DD")},O=a=>{const e=p().add(a,"day").format("YYYY-MM-DD");return u.value===e},L=()=>{f.value=""};return(a,e)=>{const l=k("Calendar"),y=U,V=k("Clock"),j=k("CircleCheck"),F=k("Warning"),H=k("Money"),J=te,Y=W,Q=ae,G=Ye,K=k("Document");return c(),v("div",Te,[t("div",Ce,[t("div",Me,[t("div",Oe,[s(y,null,{default:d(()=>[s(l)]),_:1})]),t("div",$e,[t("div",Ne,i(D.value.total),1),t("div",xe,i(C.value)+"訂單",1)])]),t("div",Re,[t("div",we,[s(y,null,{default:d(()=>[s(V)]),_:1})]),t("div",Se,[t("div",Le,i(D.value.ordered),1),e[3]||(e[3]=t("div",{class:"stat-label"},"已下單",-1))])]),t("div",Ve,[t("div",Ee,[s(y,null,{default:d(()=>[s(j)]),_:1})]),t("div",Pe,[t("div",ze,i(D.value.completed),1),e[4]||(e[4]=t("div",{class:"stat-label"},"已完成",-1))])]),t("div",Be,[t("div",Ie,[s(y,null,{default:d(()=>[s(F)]),_:1})]),t("div",Ue,[t("div",We,i(D.value.cancelled),1),e[5]||(e[5]=t("div",{class:"stat-label"},"已取消",-1))])]),t("div",je,[t("div",Fe,[s(y,null,{default:d(()=>[s(H)]),_:1})]),t("div",He,[t("div",Je," $"+i(D.value.revenue.toLocaleString()),1),t("div",Qe,i(C.value)+"營收",1)])])]),t("div",Ge,[t("div",Ke,[s(J,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),type:"date",placeholder:"選擇日期",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",style:{width:"160px"}},null,8,["modelValue"]),t("div",Xe,[s(Y,{type:O(0)?"primary":"default",onClick:n},{default:d(()=>[...e[6]||(e[6]=[_(" 今天 ",-1)])]),_:1},8,["type"]),s(Y,{type:O(1)?"primary":"default",onClick:q},{default:d(()=>[...e[7]||(e[7]=[_(" 明天 ",-1)])]),_:1},8,["type"]),s(Y,{type:O(2)?"primary":"default",onClick:A},{default:d(()=>[...e[8]||(e[8]=[_(" 後天 ",-1)])]),_:1},8,["type"])])]),t("div",Ze,[s(Q,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=m=>f.value=m),placeholder:"搜尋訂單編號、客戶姓名、電話","prefix-icon":"Search",style:{"max-width":"280px"}},null,8,["modelValue"]),s(Y,{icon:"Refresh",onClick:L,disabled:!f.value},null,8,["disabled"])]),t("div",et,[s(Y,{icon:g.value==="detailed"?"Document":"List",onClick:e[2]||(e[2]=m=>g.value=g.value==="detailed"?"simple":"detailed")},{default:d(()=>[_(i(g.value==="detailed"?"簡易模式":"詳細模式"),1)]),_:1},8,["icon"]),s(Y,{type:"primary",icon:"Plus"},{default:d(()=>[...e[9]||(e[9]=[_("新增訂單",-1)])]),_:1})])]),t("div",tt,[(c(),v(E,null,P(x,m=>t("div",{key:m.value,class:se(["status-tab",{active:b.value===m.value}]),onClick:ct=>b.value=m.value},[t("span",st,i(m.label),1),m.value!=="all"?(c(),v("span",{key:0,class:"tab-count",style:I({background:m.color})},i(m.count),5)):(c(),v("span",ot,i(D.value.total),1))],10,at)),64))]),t("div",nt,[(c(!0),v(E,null,P(R.value,m=>(c(),w(G,{key:m.id,order:m,"view-mode":g.value,onStatusChange:r},null,8,["order","view-mode"]))),128)),R.value.length===0?(c(),v("div",it,[s(y,{class:"empty-icon"},{default:d(()=>[s(K)]),_:1}),e[10]||(e[10]=t("p",{class:"empty-text"},"目前沒有訂單",-1))])):h("",!0)])])}}},ut=B(lt,[["__scopeId","data-v-b7343301"]]);export{ut as default};

import{_ as Z,c as n,o as l,$ as re,b as e,F as N,y as I,q as F,t as i,v as $,r as y,l as C,I as ue,n as A,d as a,w as p,J as le,f as oe,E as me,L as ve,K as _e,a0 as pe,j as fe,W as he,k as ye,m as D,h as Q,x as X,g as ke,R as ae}from"./index-BbS6ciBb.js";/* empty css                     *//* empty css               */import{_ as De}from"./SelectProduct-Bqy1XsdJ.js";import"./products-OpGadVTE.js";const be={class:"schedule-left"},Ye={class:"schedule-list"},ge=["onClick"],Oe={class:"date-section"},Me={class:"date-value"},$e={key:0,class:"mini-stats"},Pe={key:0,class:"stat-badge ordered"},Te={key:1,class:"stat-badge completed"},Re={key:2,class:"stat-badge cancelled"},Se={key:1,class:"no-orders-tag"},Ce={__name:"ScheduleCalendar",props:{scheduleList:{type:Array,required:!0},selectedDate:{type:String,default:null}},emits:["select"],setup(w,{emit:v}){const t=v,k=Y=>{t("select",Y)};return(Y,f)=>(l(),n("div",be,[f[0]||(f[0]=re('<div class="schedule-week-header" data-v-91bf7fee><div class="week-day" data-v-91bf7fee>æ—¥</div><div class="week-day" data-v-91bf7fee>ä¸€</div><div class="week-day" data-v-91bf7fee>äºŒ</div><div class="week-day" data-v-91bf7fee>ä¸‰</div><div class="week-day" data-v-91bf7fee>å››</div><div class="week-day" data-v-91bf7fee>äº”</div><div class="week-day" data-v-91bf7fee>å…­</div></div>',1)),e("div",Ye,[(l(!0),n(N,null,I(w.scheduleList,r=>(l(),n("div",{key:r.date,class:F(["schedule-item",{"item-selected":w.selectedDate===r.date,"not-current-month":!r.isCurrentMonth}]),onClick:P=>k(r.date)},[e("div",{class:F(["schedule-header-row",{"no-orders":!r.hasOrders}])},[e("div",Oe,[e("div",{class:F(["date-box",{saturday:r.dateObj.day()===6,sunday:r.dateObj.day()===0}])},[e("div",Me,i(r.dateObj.format("DD")),1)],2)]),r.hasOrders?(l(),n("div",$e,[r.stats.ordered>0?(l(),n("span",Pe," â†“ "+i(r.stats.ordered),1)):$("",!0),r.stats.completed>0?(l(),n("span",Te," âœ“ "+i(r.stats.completed),1)):$("",!0),r.stats.cancelled>0?(l(),n("span",Re," âœ• "+i(r.stats.cancelled),1)):$("",!0)])):(l(),n("div",Se,"æœªé–‹å–®"))],2)],10,ge))),128))])]))}},we=Z(Ce,[["__scopeId","data-v-91bf7fee"]]),xe={class:"schedule-editor"},Ee={class:"editor-header"},Ve={class:"editor-title"},Le={class:"editor-body"},Ae={class:"editor-section"},Ne={class:"field-row"},Ie={class:"field-value"},Be={class:"field-row"},He={class:"editor-section"},Fe={class:"section-content"},je={class:"field-row add-row"},ze={key:0,class:"empty-products"},Ue={key:1,class:"product-list"},We={class:"product-item"},qe={class:"product-info"},Je={class:"product-name"},Ke={class:"product-limit"},Ge={__name:"ScheduleEditor",props:{dateLabel:{type:String,default:""},initialProducts:{type:Array,default:()=>[]},initialStatus:{type:String,default:"draft"},initialStartTime:{type:String,default:""},initialEndTime:{type:String,default:""}},emits:["close","save"],setup(w,{emit:v}){const t=w,k=v,Y=[{label:"è‰ç¨¿",value:"draft"},{label:"é å‘Š",value:"announce"},{label:"æ”¶å–®ä¸­",value:"open"},{label:"å·²çµå–®",value:"closed"},{label:"å‡ºè²¨çµæŸ",value:"shipped"}],f=y(t.initialStatus),r=y(t.initialStartTime),P=y(t.initialEndTime),b=y([]),g=y(""),x=y(null),T=C(()=>{if(!t.dateLabel)return"";const d=t.dateLabel.split("/");return d.length===3?`${d[1]}/${d[2]}`:t.dateLabel});ue(()=>[t.initialProducts,t.initialStatus,t.initialStartTime,t.initialEndTime],()=>{f.value=t.initialStatus,r.value=t.initialStartTime,P.value=t.initialEndTime,b.value=t.initialProducts.map(d=>({id:d.id,name:d.name,max:d.max??null})),g.value=""},{immediate:!0});const j=C(()=>b.value.map(d=>d.id)),z=()=>{if(!x.value)return;const d=x.value.getProductById(g.value);if(!d)return;if(b.value.some(O=>O.id===d.id)){ye.warning("æ­¤ç”¢å“å·²åœ¨åˆ—è¡¨ä¸­"),g.value="";return}b.value.push({id:d.id,name:d.name,max:0}),g.value=""},U=d=>{b.value=b.value.filter(c=>c.id!==d)},W=()=>{k("close")},q=()=>{k("save",{status:f.value,startTime:r.value,endTime:P.value,products:b.value.map(d=>({id:d.id,name:d.name,max:d.max??null}))})};return(d,c)=>{const O=A("Back"),B=le,E=oe,H=A("Check"),V=me,J=_e,L=ve,o=pe,s=fe,_=he;return l(),n("div",xe,[e("div",Ee,[e("div",Ve,"ç·¨è¼¯"+i(T.value)+"çš„æŽ’ç¨‹",1),e("div",null,[a(E,{class:"editor-back",circle:"",onClick:W},{default:p(()=>[a(B,null,{default:p(()=>[a(O)]),_:1})]),_:1}),a(E,{class:"editor-save",type:"primary",circle:"",onClick:q},{default:p(()=>[a(B,null,{default:p(()=>[a(H)]),_:1})]),_:1})])]),e("div",Le,[e("div",Ae,[c[4]||(c[4]=e("div",{class:"section-title"},"æŽ’ç¨‹è³‡è¨Š",-1)),a(s,{class:"schedule-form","label-position":"top"},{default:p(()=>[e("div",Ne,[a(V,{label:"æ—¥æœŸ",class:"field"},{default:p(()=>[e("div",Ie,i(w.dateLabel||"-"),1)]),_:1}),a(V,{label:"é–‹å–®ç‹€æ…‹",class:"field"},{default:p(()=>[a(L,{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=u=>f.value=u),placeholder:"é¸æ“‡ç‹€æ…‹"},{default:p(()=>[(l(),n(N,null,I(Y,u=>a(J,{key:u.value,label:u.label,value:u.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),e("div",Be,[a(V,{label:"é–‹å–®é–‹å§‹æ™‚é–“",class:"field"},{default:p(()=>[a(o,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=u=>r.value=u),placeholder:"é–‹å§‹æ™‚é–“",format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]),_:1}),a(V,{label:"é–‹å–®æˆªæ­¢æ™‚é–“",class:"field"},{default:p(()=>[a(o,{modelValue:P.value,"onUpdate:modelValue":c[2]||(c[2]=u=>P.value=u),placeholder:"æˆªæ­¢æ™‚é–“",format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]),_:1})])]),_:1})]),e("div",He,[c[6]||(c[6]=e("div",{class:"section-title"},"ä»Šæ—¥å‡ºçˆç”¢å“",-1)),e("div",Fe,[e("div",je,[a(De,{ref_key:"selectProductRef",ref:x,modelValue:g.value,"onUpdate:modelValue":c[3]||(c[3]=u=>g.value=u),class:"product-select","exclude-ids":j.value},null,8,["modelValue","exclude-ids"]),a(E,{type:"primary",icon:"plus",circle:"",disabled:!g.value,onClick:z},null,8,["disabled"])]),b.value.length===0?(l(),n("div",ze," å°šæœªæ–°å¢žç”¢å“ ")):(l(),n("div",Ue,[(l(!0),n(N,null,I(b.value,u=>(l(),n("div",{key:u.id,class:"product-wrapper"},[e("div",We,[e("div",qe,[e("div",Je,i(u.name),1)]),e("div",Ke,[c[5]||(c[5]=e("div",{class:"field-label"},"å¯å”®ä¸Šé™",-1)),a(_,{modelValue:u.max,"onUpdate:modelValue":M=>u.max=M,min:0,max:999,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])]),a(E,{type:"danger",plain:"",icon:"delete",size:"small",onClick:M=>U(u.id)},null,8,["onClick"])]))),128))]))])])])])}}},Qe=Z(Ge,[["__scopeId","data-v-cb0432ee"]]),Xe={class:"schedule-container"},Ze={class:"schedule-header"},et={class:"header-top"},tt={class:"month-navigation"},st={class:"month-label"},at={class:"schedule-main"},lt={key:1,class:"schedule-right"},ot={class:"detail-header"},dt={class:"detail-header-left"},it={key:0,class:"detail-stats"},nt={class:"stat-ordered"},ct={class:"stat-completed"},rt={class:"stat-cancelled"},ut={class:"detail-actions"},mt={class:"detail-content"},vt={key:0,class:"products-section"},_t={class:"section-title"},pt={class:"count"},ft={class:"products-grid"},ht={class:"product-info"},yt={class:"product-name"},kt={class:"product-category"},Dt={class:"product-footer"},bt={class:"product-price"},Yt={key:0,class:"product-stock"},gt={key:1,class:"product-sold-out"},Ot={key:1,class:"orders-section"},Mt={class:"section-title"},$t={class:"count"},Pt={class:"orders-list"},Tt={class:"order-id"},Rt={class:"order-customer"},St={class:"name"},Ct={class:"order-time"},wt={class:"order-items"},xt={class:"order-amount"},Et={key:2,class:"empty-orders"},Vt={__name:"schedule",setup(w){const v=y(D()),t=y(null),k=y([]),Y=y(!1),f=y({status:"draft",startTime:"",endTime:"",products:[]}),r=y([{id:"PROD-001",name:"ä¸¹éº¥ç‰›è§’éºµåŒ…",category:"ç‰›è§’éºµåŒ…",image:"ðŸ¥",price:45,stock:25,available:!0},{id:"PROD-002",name:"æ³•å¼é•·æ£éºµåŒ…",category:"åå¸",image:"ðŸž",price:65,stock:15,available:!0},{id:"PROD-003",name:"æ ¸æ¡ƒæå­éºµåŒ…",category:"è»ŸéºµåŒ…",image:"ðŸž",price:55,stock:20,available:!0}]),P={"2026-02-16":["PROD-001","PROD-002","PROD-003","PROD-004","PROD-006"],"2026-02-15":["PROD-001","PROD-003","PROD-005","PROD-006"],"2026-02-17":["PROD-002","PROD-004","PROD-005"],"2026-02-18":["PROD-001","PROD-002","PROD-003","PROD-004"]},b=y([{id:"ORD-20260216-001",customerName:"é™³å°ç¾Ž",pickupTime:"2026-02-16 14:00",status:"ordered",totalAmount:465,items:2},{id:"ORD-20260216-002",customerName:"çŽ‹å¤§æ˜Ž",pickupTime:"2026-02-16 15:30",status:"ordered",totalAmount:605,items:2},{id:"ORD-20260216-004",customerName:"é­å¿—è»’",pickupTime:"2026-02-16 10:30",status:"ordered",totalAmount:1290,items:7},{id:"ORD-20260216-009",customerName:"é„’èŠŠèŠŠ",pickupTime:"2026-02-16 15:00",status:"ordered",totalAmount:895,items:5},{id:"ORD-20260216-013",customerName:"å³æ˜€åº­",pickupTime:"2026-02-16 17:30",status:"ordered",totalAmount:2770,items:6},{id:"ORD-20260215-015",customerName:"å¼µé›…èŠ³",pickupTime:"2026-02-15 18:00",status:"completed",totalAmount:540,items:2},{id:"ORD-20260215-014",customerName:"åŠ‰å»ºåœ‹",pickupTime:"2026-02-15 17:30",status:"cancelled",totalAmount:330,items:1},{id:"ORD-20260217-001",customerName:"é»ƒå¿—æ˜Ž",pickupTime:"2026-02-17 10:00",status:"ordered",totalAmount:555,items:2},{id:"ORD-20260217-002",customerName:"æŽæ·‘èŠ¬",pickupTime:"2026-02-17 14:30",status:"ordered",totalAmount:300,items:1},{id:"ORD-20260218-001",customerName:"å‘¨ç¾ŽçŽ²",pickupTime:"2026-02-18 11:00",status:"ordered",totalAmount:580,items:2}]),g=()=>{const o=[],s=v.value.startOf("month"),_=v.value.endOf("month"),u=s.day(),M=s.subtract(u,"day"),K=6-_.day(),m=_.add(K,"day");let R=M;for(;R.isBefore(m)||R.isSame(m);){const se=R.format("YYYY-MM-DD"),S=b.value.filter(h=>h.pickupTime.startsWith(se)),de=R.format("YYYY-MM"),ie=v.value.format("YYYY-MM"),ne=de===ie,ce={total:S.length,ordered:S.filter(h=>h.status==="ordered").length,completed:S.filter(h=>h.status==="completed").length,cancelled:S.filter(h=>h.status==="cancelled").length,revenue:S.filter(h=>h.status!=="cancelled").reduce((h,G)=>h+G.totalAmount,0)};o.push({date:se,dateObj:R.clone(),orders:S.sort((h,G)=>D(h.pickupTime).diff(D(G.pickupTime))),stats:ce,isOpen:!0,hasOrders:S.length>0,isCurrentMonth:ne}),R=R.add(1,"day")}return o};k.value=g();const x=()=>{k.value=g();const o=D().format("YYYY-MM-DD"),s=k.value.find(_=>_.date===o);if(s&&s.hasOrders)t.value=o;else{const _=k.value.find(u=>u.isCurrentMonth);t.value=_?.date||null}};x();const T=()=>{x()},ee=()=>{v.value=v.value.subtract(1,"month"),T()},j=()=>{v.value=v.value.add(1,"month"),T()},z=()=>{v.value=D(),t.value=null,T()},U=()=>{if(!t.value){t.value=D().format("YYYY-MM-DD");return}const s=D(t.value).subtract(1,"day");s.format("YYYY-MM")!==v.value.format("YYYY-MM")&&(v.value=s,T()),t.value=s.format("YYYY-MM-DD")},W=()=>{if(!t.value){t.value=D().format("YYYY-MM-DD");return}const s=D(t.value).add(1,"day");s.format("YYYY-MM")!==v.value.format("YYYY-MM")&&(v.value=s,T()),t.value=s.format("YYYY-MM-DD")},q=C(()=>v.value.format("YYYY å¹´ M æœˆ")),d=C(()=>t.value?k.value.find(o=>o.date===t.value)?.orders||[]:[]),c=C(()=>t.value&&k.value.find(o=>o.date===t.value)?.stats||null),O=C(()=>t.value?(P[t.value]||[]).map(s=>r.value.find(_=>_.id===s)).filter(Boolean):[]),B=C(()=>t.value?D(t.value).format("YYYY/MM/DD"):""),E=o=>({ordered:"å·²ä¸‹å–®",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"})[o]||o,H=o=>({ordered:"#3b82f6",completed:"#10b981",cancelled:"#ef4444"})[o]||"#6b7280",V=o=>D(o).format("HH:mm"),J=()=>{f.value={status:"draft",startTime:"",endTime:"",products:O.value.map(o=>({id:o.id,name:o.name,limit:o.stock??0,max:o.stock??null}))},Y.value=!0},L=()=>{Y.value=!1};return(o,s)=>{const _=oe,u=A("Close"),M=le,te=A("More"),K=A("Document");return l(),n("div",Xe,[e("div",Ze,[e("div",et,[s[3]||(s[3]=e("div",null,[e("h2",null,"æŽ¥å–®æŽ’ç¨‹"),e("p",{class:"subtitle"},"ç®¡ç†æ¯æ—¥æŽ¥å–®ç‹€æ³ï¼Œå¿«é€ŸæŸ¥çœ‹è¨‚å–®è³‡è¨Š")],-1)),a(_,{type:"primary",icon:"Back",onClick:z},{default:p(()=>[...s[2]||(s[2]=[Q(" å›žåˆ°ä»Šå¤© ",-1)])]),_:1})]),e("div",tt,[a(_,{icon:"ArrowLeft",circle:"",onClick:ee}),e("span",st,i(q.value),1),a(_,{icon:"ArrowRight",circle:"",onClick:j})])]),e("div",at,[Y.value?(l(),X(Qe,{key:0,"date-label":B.value,"available-products":r.value,"initial-products":f.value.products,"initial-status":f.value.status,"initial-start-time":f.value.startTime,"initial-end-time":f.value.endTime,onClose:L,onSave:L},null,8,["date-label","available-products","initial-products","initial-status","initial-start-time","initial-end-time"])):t.value?(l(),n("div",lt,[e("div",ot,[e("div",dt,[a(_,{class:"day-nav-btn",icon:"ArrowLeft",circle:"",size:"small",onClick:U}),e("div",null,[e("h3",null,i(ke(D)(t.value).format("YYYY å¹´ M æœˆ DD æ—¥ (ddd)")),1),c.value?(l(),n("p",it,[Q(" å…± "+i(c.value.total)+" ç­†è¨‚å–® | ",1),e("span",nt,"â†“ "+i(c.value.ordered),1),e("span",ct,"âœ“ "+i(c.value.completed),1),e("span",rt,"âœ• "+i(c.value.cancelled),1),Q(" | ç‡Ÿæ”¶ $"+i(c.value.revenue),1)])):$("",!0)]),a(_,{class:"day-nav-btn",icon:"ArrowRight",circle:"",size:"small",onClick:W})]),e("div",ut,[a(_,{class:"detail-more",circle:"",onClick:s[0]||(s[0]=m=>Y.value?L():J())},{default:p(()=>[Y.value?(l(),X(M,{key:0},{default:p(()=>[a(u)]),_:1})):(l(),X(M,{key:1},{default:p(()=>[a(te)]),_:1}))]),_:1})])]),e("div",mt,[O.value.length>0?(l(),n("div",vt,[e("div",_t,[s[4]||(s[4]=e("span",null,"ä»Šæ—¥å‡ºçˆ",-1)),e("span",pt,i(O.value.length)+" é …å•†å“",1)]),e("div",ft,[(l(!0),n(N,null,I(O.value,m=>(l(),n("div",{key:m.id,class:F(["product-card",{"out-of-stock":!m.available}])},[e("div",ht,[e("h4",yt,i(m.name),1),e("p",kt,i(m.category),1),e("div",Dt,[e("span",bt,"$"+i(m.price),1),m.available?(l(),n("span",Yt,i(m.stock)+" å€‹",1)):(l(),n("span",gt,"å·²å”®å®Œ"))])])],2))),128))])])):$("",!0),d.value.length>0?(l(),n("div",Ot,[e("div",Mt,[s[5]||(s[5]=e("span",null,"è¨‚å–®æ¸…å–®",-1)),e("span",$t,i(d.value.length)+" ç­†",1)]),e("div",Pt,[(l(!0),n(N,null,I(d.value,m=>(l(),n("div",{key:m.id,class:"order-row",style:ae({borderLeftColor:H(m.status)})},[e("div",Tt,i(m.id),1),e("div",Rt,[e("span",St,i(m.customerName),1)]),e("div",Ct,i(V(m.pickupTime)),1),e("div",wt,i(m.items)+" é …",1),e("div",xt,"$"+i(m.totalAmount),1),e("div",{class:"order-status",style:ae({background:H(m.status)})},i(E(m.status)),5)],4))),128))])])):$("",!0),d.value.length===0&&O.value.length===0?(l(),n("div",Et,[a(M,null,{default:p(()=>[a(K)]),_:1}),s[6]||(s[6]=e("p",null,"è©²æ—¥æœŸæš«ç„¡è¨‚å–®åŠå•†å“",-1))])):$("",!0)])])):$("",!0),a(we,{"schedule-list":k.value,"selected-date":t.value,onSelect:s[1]||(s[1]=m=>t.value=m)},null,8,["schedule-list","selected-date"])])])}}},Ht=Z(Vt,[["__scopeId","data-v-57cde3f1"]]);export{Ht as default};

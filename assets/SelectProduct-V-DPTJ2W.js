import{r as p,l as b,I as E,y as i,o as s,w as v,c as f,F as y,z as g,a2 as O,G as P,H as V}from"./index-BcR1qpHV.js";/* empty css               */import{a as x}from"./products-B2Lg2W-Y.js";const D=[{label:"草稿",value:"DRAFT"},{label:"預告",value:"ANNOUNCED"},{label:"收單中",value:"OPEN"},{label:"已結單",value:"CLOSED"},{label:"出貨結束",value:"FULFILLED"}],F=[{label:"全部",value:"all",color:""},{label:"已下單",value:"ordered",color:"#3b82f6",count:0},{label:"已完成",value:"completed",color:"#10b981",count:0},{label:"已取消",value:"cancelled",color:"#ef4444",count:0}],C={__name:"SelectProduct",props:{modelValue:[String,Number],placeholder:{type:String,default:"請選擇產品"},excludeIds:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{expose:S,emit:B}){const m=u,d=p(!1),r=p([]),_=b(()=>{const e=new Set(m.excludeIds);return r.value.filter(l=>!e.has(l.id))}),h=b(()=>{const e=new Set(m.excludeIds),l=r.value.filter(a=>!e.has(a.id)),o={};return l.forEach(a=>{const n=a.category_id,t=a.category?.name||a.category_name||"未分類";o[n]||(o[n]={label:t,categoryId:n,options:[]}),o[n].options.push({value:a.id,label:a.name})}),Object.values(o)}),I=async()=>{d.value=!0;try{const e=await x.List({});console.log("products",e),r.value=e.data.data||[]}catch(e){console.error("fetch data error",e)}finally{d.value=!1}};return E(()=>{I()}),S({getProductById:e=>r.value.find(l=>l.id===e)}),(e,l)=>{const o=P,a=O,n=V;return s(),i(n,{modelValue:u.modelValue,onClear:l[0]||(l[0]=t=>e.$emit("update:modelValue",null)),"onUpdate:modelValue":l[1]||(l[1]=t=>e.$emit("update:modelValue",t)),placeholder:u.placeholder,loading:d.value,disabled:u.disabled||_.value.length===0},{default:v(()=>[(s(!0),f(y,null,g(h.value,t=>(s(),i(a,{key:t.categoryId,label:t.label},{default:v(()=>[(s(!0),f(y,null,g(t.options,c=>(s(),i(o,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder","loading","disabled"])}}};export{C as _,F as o,D as s};

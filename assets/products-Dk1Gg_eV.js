import{_ as F,f as y,g as z,h as P,i as w,w as n,a as i,c as f,F as D,j as I,k as G,b as e,l as J,m as Q,E as N,d as j,n as Y,p as Z,o as m,t as C,q as se,r as q,s as S,u as O,v as A,x as M,y as K,z as W,A as X,B as ee,C as ie,D as de,G as ue,H as re}from"./index-AbmHqZ4N.js";/* empty css                     */const me={class:"layout"},ce={class:"list"},pe={key:0,class:"chips"},_e={class:"chip__title"},ge={class:"form"},ve={__name:"EditCategory",emits:["save"],setup(V,{expose:k,emit:g}){const c=g,d=y(!1),o=y([{id:1,name:"吐司"},{id:2,name:"可頌"},{id:3,name:"貝果"},{id:4,name:"法棍"},{id:5,name:"雜糧"},{id:6,name:"酸種"},{id:7,name:"波蘿"},{id:8,name:"甜甜圈"},{id:9,name:"蛋塔"},{id:10,name:"鹽可頌"},{id:11,name:"牛角包"},{id:12,name:"丹麥"},{id:14,name:"佛卡夏"},{id:15,name:"帕尼尼"},{id:16,name:"軟法"},{id:17,name:"雜糧"},{id:18,name:"全麥"},{id:19,name:"司康"}]),t=y([]),s=z({name:""});P(()=>t.value.length>0);const $=()=>{d.value=!0},r=()=>{d.value=!1},b=()=>{o.value.push({id:Date.now(),name:s.name}),s.name=""},h=l=>{o.value=o.value.filter(u=>u.id!==l)},p=()=>{c("save",[...t.value]),d.value=!1};return k({open:$,close:r}),(l,u)=>{const v=N,U=G,_=Q,R=J,B=Y,x=Z;return m(),w(x,{modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=E=>d.value=E),title:"編輯商品種類",width:"800px","append-to-body":"","destroy-on-close":"","close-on-click-modal":!1},{footer:n(()=>[e(v,{onClick:r},{default:n(()=>[...u[5]||(u[5]=[j("取消",-1)])]),_:1}),e(v,{type:"primary",onClick:p},{default:n(()=>[...u[6]||(u[6]=[j("儲存",-1)])]),_:1})]),default:n(()=>[i("div",me,[i("section",ce,[u[2]||(u[2]=i("header",null,[i("h3",null,"現有種類"),i("small",null,"若種類被移除，原已存在的商品將被歸類為「未分類」")],-1)),o.value.length?(m(),f("div",pe,[(m(!0),f(D,null,I(o.value,E=>(m(),f("div",{class:"chip",key:E.id},[i("div",_e,C(E.name),1),e(v,{size:"small",icon:"Minus",circle:"",plain:"",onClick:H=>h(E.id)},null,8,["onClick"])]))),128))])):(m(),w(U,{key:1,description:"目前沒有種類"}))]),i("section",ge,[u[4]||(u[4]=i("header",null,[i("h3",null,"新增種類")],-1)),e(B,{model:s,"label-width":"60px","label-position":"top"},{default:n(()=>[e(R,{label:"名稱",prop:"name"},{default:n(()=>[e(_,{modelValue:s.name,"onUpdate:modelValue":u[0]||(u[0]=E=>s.name=E),placeholder:"輸入種類名稱"},null,8,["modelValue"])]),_:1}),e(R,null,{default:n(()=>[e(v,{type:"primary",onClick:b},{default:n(()=>[...u[3]||(u[3]=[j("新增",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1},8,["modelValue"])}}},fe=F(ve,[["__scopeId","data-v-faeff992"]]),be={class:"images-uploader"},ye=["src","alt"],Ve={class:"upload-text"},ke={class:"hint"},Ue={__name:"UploadPhotos",props:{modelValue:{type:Array,default:()=>[]},disabled:Boolean,max:{type:Number,default:4}},emits:["upload","delete","update:modelValue"],setup(V,{emit:k}){const g=V,c=k,d=y(!1),o=y([...g.modelValue]),t=async r=>{const b=Array.from(r.target.files),h=o.value.length,p=Math.min(b.length,g.max-h);if(p===0){M.warning(`最多只能上傳 ${g.max} 張圖片`);return}b.slice(0,p).forEach(u=>{const v=URL.createObjectURL(u);o.value.push(v),c("upload",v)}),c("update:modelValue",o.value),r.target.value="",p<b.length&&M.info(`已達上傳上限，共上傳 ${p} 張`)},s=r=>{o.value.splice(r,1),c("delete",r),c("update:modelValue",o.value)};se(()=>g.modelValue,r=>{o.value=[...r]},{deep:!0});const $=P(()=>o.value.length<g.max);return(r,b)=>{const h=q("Delete"),p=O;return m(),f("div",be,[i("div",{class:A(["gallery",{"has-images":o.value.length>0}])},[(m(!0),f(D,null,I(o.value,(l,u)=>(m(),f("div",{key:u,class:"image-item"},[i("img",{src:l,alt:`圖片 ${u+1}`},null,8,ye),e(p,{class:"delete-btn",onClick:v=>s(u)},{default:n(()=>[e(h)]),_:1},8,["onClick"])]))),128)),$.value?(m(),f("label",{key:0,for:"image-upload",class:A([{disabled:d.value||V.disabled},"upload-box"])},[i("div",Ve,C(d.value?"上傳中...":"上傳圖片"),1),i("small",null,C(o.value.length)+"/"+C(V.max),1)],2)):S("",!0)],2),i("small",ke,"建議尺寸 600x400，檔案小於 1MB，最多 "+C(V.max)+" 張",1),i("input",{type:"file",id:"image-upload",accept:".png,.jpg,.jpeg,.webp",multiple:"",onChange:t},null,32)])}}},he=F(Ue,[["__scopeId","data-v-77a54f16"]]),Ee={__name:"SelectProductStatus",props:{modelValue:String,placeholder:{type:String,default:"請選擇"}},emits:["update:modelValue"],setup(V,{emit:k}){const g=y([{value:!0,label:"啟用"},{value:!1,label:"下架"}]);return(c,d)=>{const o=W,t=X;return m(),w(t,{modelValue:V.modelValue,onClear:d[0]||(d[0]=s=>c.$emit("update:modelValue",null)),"onUpdate:modelValue":d[1]||(d[1]=s=>c.$emit("update:modelValue",s)),placeholder:V.placeholder},{default:n(()=>[(m(!0),f(D,null,I(K(g),s=>(m(),w(o,{key:s.id,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},Ce={__name:"SelectCategory",props:{modelValue:String,placeholder:{type:String,default:"請選擇種類"}},emits:["update:modelValue"],setup(V,{emit:k}){const g=y([{id:1,name:"吐司"},{id:2,name:"可頌"},{id:3,name:"貝果"},{id:4,name:"法棍"},{id:5,name:"雜糧"},{id:6,name:"酸種"},{id:7,name:"波蘿"},{id:8,name:"甜甜圈"},{id:9,name:"蛋塔"},{id:10,name:"鹽可頌"},{id:11,name:"牛角包"},{id:12,name:"丹麥"},{id:14,name:"佛卡夏"},{id:15,name:"帕尼尼"},{id:16,name:"軟法"},{id:17,name:"雜糧"},{id:18,name:"全麥"},{id:19,name:"司康"}]);return(c,d)=>{const o=W,t=X;return m(),w(t,{modelValue:V.modelValue,onClear:d[0]||(d[0]=s=>c.$emit("update:modelValue",null)),"onUpdate:modelValue":d[1]||(d[1]=s=>c.$emit("update:modelValue",s)),placeholder:V.placeholder},{default:n(()=>[(m(!0),f(D,null,I(K(g),s=>(m(),w(o,{key:s.id,label:s.name,value:s.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},we={key:0},$e={key:1},xe={class:"ing-table"},Le={key:2},je={__name:"EditProduct",props:{categories:{type:Array,default:()=>[]}},emits:["save"],setup(V,{expose:k,emit:g}){const c=g,d=y(!1),o=y("基本資訊");y(null);const t=z({id:null,name:"",category:"",price:100,description:"",ingredients:"",imageUrls:[],isEnabled:null}),s=y([]);z({name:"",amount:"",visible:!0});const $=(p={})=>{Object.assign(t,p),s.value=p.ingredientsTable?p.ingredientsTable.map(l=>({...l})):[],d.value=!0},r=()=>{d.value=!1},b=()=>{if(!t.name||!t.category||!t.price){M.warning("請填寫必填欄位（品名、類別、定價）");return}const p={...t,ingredientsTable:s.value};c("save",p),d.value=!1},h=p=>{s.value.splice(p,1)};return k({open:$,close:r}),(p,l)=>{const u=ee,v=Q,U=J,_=Ce,R=ie,B=Ee,x=ue,E=re,H=q("Delete"),le=O,te=de,T=N,ae=he,ne=Y,oe=Z;return m(),w(oe,{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=a=>d.value=a),title:t.id?"編輯商品":"新增商品",width:"800px","append-to-body":"","destroy-on-close":""},{footer:n(()=>[e(T,{onClick:r},{default:n(()=>[...l[13]||(l[13]=[j("取消",-1)])]),_:1}),e(T,{type:"primary",onClick:b},{default:n(()=>[...l[14]||(l[14]=[j("儲存",-1)])]),_:1})]),default:n(()=>[e(u,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=a=>o.value=a),options:["基本資訊","商品圖片","詳細成分"],block:""},null,8,["modelValue"]),l[15]||(l[15]=i("br",null,null,-1)),e(ne,{model:t,"label-width":"120px","label-position":"left"},{default:n(()=>[o.value==="基本資訊"?(m(),f("div",we,[e(U,{label:"產品名稱",required:""},{default:n(()=>[e(v,{modelValue:t.name,"onUpdate:modelValue":l[1]||(l[1]=a=>t.name=a),placeholder:"產品名稱（例：原味軟法）"},null,8,["modelValue"])]),_:1}),e(U,{label:"產品類別",required:""},{default:n(()=>[e(_,{modelValue:t.category,"onUpdate:modelValue":l[2]||(l[2]=a=>t.category=a)},null,8,["modelValue"])]),_:1}),e(U,{label:"產品定價",required:""},{default:n(()=>[e(R,{modelValue:t.price,"onUpdate:modelValue":l[3]||(l[3]=a=>t.price=a),min:0,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(U,{label:"產品簡介"},{default:n(()=>[e(v,{modelValue:t.description,"onUpdate:modelValue":l[4]||(l[4]=a=>t.description=a),type:"textarea",rows:3,placeholder:"產品簡短介紹"},null,8,["modelValue"])]),_:1}),e(U,{label:"成分表"},{default:n(()=>[e(v,{modelValue:t.ingredients,"onUpdate:modelValue":l[5]||(l[5]=a=>t.ingredients=a),type:"textarea",rows:3,placeholder:"例如：高筋麵粉、牛奶、酵母、鹽、糖"},null,8,["modelValue"])]),_:1}),e(U,{label:"狀態"},{default:n(()=>[e(B,{modelValue:t.isEnabled,"onUpdate:modelValue":l[6]||(l[6]=a=>t.isEnabled=a),placeholder:"選擇產品狀態"},null,8,["modelValue"])]),_:1})])):S("",!0),o.value==="詳細成分"?(m(),f("div",$e,[i("div",xe,[l[12]||(l[12]=i("small",{class:"hint"},"輸入成分與份量，可協助統計訂單所需原料。非必填欄位。",-1)),e(te,{data:s.value,border:"",size:"small"},{default:n(()=>[e(x,{label:"名稱",align:"center"},{default:n(({row:a})=>[e(v,{modelValue:a.name,"onUpdate:modelValue":L=>a.name=L,placeholder:"成分名稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{label:"份量(公克)",width:"110",align:"center"},{default:n(({row:a})=>[e(v,{inputmode:"numeric",modelValue:a.amount,"onUpdate:modelValue":L=>a.amount=L,placeholder:"份量(公克)"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{label:"顯示",width:"60",align:"center"},{default:n(({row:a})=>[e(E,{size:"small",modelValue:a.visible,"onUpdate:modelValue":L=>a.visible=L},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(x,{label:"",width:"50",align:"center"},{default:n(({$index:a})=>[e(le,{class:"delete-btn",onClick:L=>h(a)},{default:n(()=>[e(H)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(T,{type:"primary",plain:"",size:"small",onClick:l[7]||(l[7]=a=>s.value.push({name:"",amount:"",visible:!0}))},{default:n(()=>[...l[11]||(l[11]=[j(" 新增 ",-1)])]),_:1})])])):S("",!0),o.value==="商品圖片"?(m(),f("div",Le,[e(ae,{modelValue:t.imageUrls,"onUpdate:modelValue":l[8]||(l[8]=a=>t.imageUrls=a),disabled:!1,onUpload:l[9]||(l[9]=a=>{t.imageUrls=a})},null,8,["modelValue"])])):S("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},Se=F(je,[["__scopeId","data-v-3cb69082"]]),Re={class:"page"},De={class:"toolbar"},Ie={class:"columns-2"},Pe=["src","alt"],Fe={key:0,class:"overlay"},Be={class:"category"},Te={class:"info"},ze={class:"title"},Ae={class:"text-ellipsis-2"},Me={class:"description text-ellipsis-2"},Ne={class:"price"},qe={class:"new-product flex justify-end"},Oe={__name:"products",setup(V){const k=y(),g=y(),c=y("全部"),d=["全部","吐司","可頌","貝果","法棍","酸種","波蘿","雜糧","甜甜圈","蛋塔","鹽可頌","牛角包","丹麥","未分類"],o=[{id:1,name:"經典牛奶吐司外脆內軟，適合做法式吐司。",category:"吐司",price:120,description:"柔軟奶香，當日現烤基底吐司。",tag:"招牌",image:new URL("/backlink/assets/6-D5qL7wmO.jpg",import.meta.url).href,isEnabled:!0},{id:2,name:"法式厚切吐司",category:"吐司",price:140,description:"外脆內軟，適合做法式吐司。",tag:"厚切",image:new URL("/backlink/assets/2-Fw9ETAIH.jpg",import.meta.url).href,isEnabled:!1},{id:3,name:"海鹽奶油可頌",category:"可頌",price:75,description:"層次酥脆，帶淡淡海鹽風味。",tag:"人氣",image:new URL("/backlink/assets/3-DOYJI_-x.jpg",import.meta.url).href,isEnabled:!0},{id:4,name:"伯爵茶貝果",category:"貝果",price:90,description:"茶香濃郁，口感紮實。",tag:"茶香",image:new URL("/backlink/assets/4-MIvaVCLh.jpg",import.meta.url).href,isEnabled:!1},{id:5,name:"煙燻火腿三明治",category:"雜糧",price:160,description:"全麥雜糧麵包夾煙燻火腿與起司。",tag:"輕食",image:new URL("/backlink/assets/1-DfclmL9F.jpg",import.meta.url).href,isEnabled:!0},{id:6,name:"小麥酸種",category:"酸種",price:180,description:"自然發酵 24 小時，帶淡淡酸香。",tag:"低酵母",image:new URL("/backlink/assets/10-BL9mfRGP.jpg",import.meta.url).href,isEnabled:!0},{id:7,name:"蜂蜜核桃雜糧",category:"雜糧",price:150,description:"核桃與蜂蜜增加香氣與口感。",tag:"高纖",image:new URL("/backlink/assets/2-Fw9ETAIH.jpg",import.meta.url).href,isEnabled:!0},{id:8,name:"手作波蘿麵包",category:"波蘿",price:65,description:"外層脆皮波蘿，內裡鬆軟奶香。",tag:"下午茶",image:new URL("/backlink/assets/9-CBxZzuVd.jpg",import.meta.url).href,isEnabled:!0},{id:9,name:"蒜香法棍",category:"法棍",price:110,description:"外酥內軟，蒜香奶油均勻滲入。",tag:"熱賣",image:new URL("/backlink/assets/5-CgQNPvIp.jpg",import.meta.url).href,isEnabled:!0},{id:10,name:"巧克力可頌",category:"可頌",price:85,description:"夾入黑巧克力棒，烤後微微融化。",tag:"甜點",image:new URL("/backlink/assets/7-BPvFazVr.jpg",import.meta.url).href,isEnabled:!1},{id:11,name:"起司鹹可頌",category:"可頌",price:90,description:"表層烤上帕瑪森與切達雙起司。",tag:"鹹香",image:new URL("/backlink/assets/6-D5qL7wmO.jpg",import.meta.url).href,isEnabled:!0},{id:12,name:"桂圓紅棗吐司",category:"吐司",price:150,description:"桂圓與紅棗丁拌入麵糰，香甜耐嚼。",tag:"季節",image:new URL("/backlink/assets/8-DTHH7L2T.jpg",import.meta.url).href,isEnabled:!1}],t=P(()=>c.value==="全部"?o:o.filter(r=>r.category===c.value)),s=P(()=>d.filter(r=>r!=="全部").map(r=>({name:r,value:r}))),$=r=>{console.log("儲存產品：",r)};return(r,b)=>{const h=fe,p=ee,l=N,u=q("MoreFilled"),v=O,U=G;return m(),f("div",Re,[e(h,{ref_key:"editCategory",ref:k},null,512),e(Se,{ref_key:"editProduct",ref:g,categories:s.value,onSave:$},null,8,["categories"]),i("div",De,[e(p,{modelValue:c.value,"onUpdate:modelValue":b[0]||(b[0]=_=>c.value=_),options:d},null,8,["modelValue"]),e(l,{icon:"setting",text:"",onClick:b[1]||(b[1]=_=>k.value.open())})]),i("div",Ie,[(m(!0),f(D,null,I(t.value,_=>(m(),f("div",{class:"card",key:_.id},[i("div",{class:A(["thumb",{disabled:!_.isEnabled}])},[i("img",{src:_.image,alt:_.name},null,8,Pe),_.isEnabled?S("",!0):(m(),f("div",Fe,"下架")),i("div",Be,C(_.category),1)],2),i("div",Te,[i("div",ze,[i("span",Ae,C(_.name),1),e(v,{onClick:R=>g.value.open(_)},{default:n(()=>[e(u)]),_:1},8,["onClick"])]),i("p",Me,C(_.description),1),i("span",Ne,"$"+C(_.price),1)])]))),128))]),t.value.length===0?(m(),w(U,{key:0,description:"沒有符合條件的產品"})):S("",!0),i("div",qe,[e(l,{type:"primary",circle:"",icon:"plus",size:"large",plain:"",onClick:b[2]||(b[2]=_=>g.value?.open())})])])}}},Je=F(Oe,[["__scopeId","data-v-4e4a4bf3"]]);export{Je as default};
